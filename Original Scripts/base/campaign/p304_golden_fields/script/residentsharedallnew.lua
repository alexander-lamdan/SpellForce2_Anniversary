
HomepointX = 440.905
HomepointY = 322.418	

gtMyBed =
{  
  [1] = { X = 369.151, Y = 156.501 },
  [2] = { X = 371.039, Y = 383.906 },
  [3] = { X = 507.831, Y = 317.912 },
  [4] = { X = 434.429, Y = 159.541 },
  [5] = { X = 234.968, Y = 204.674 },
  [6] = { X = 218.145, Y = 319.715 },
  [7] = { X = 207.74, Y = 343.714 },
  [8] = { X = 334.645, Y = 476.592 },
  [9] = { X = 251.178, Y = 267.311 }, 
  [10] = { X = 124.49, Y = 250.888 },
}	

gtAllPoints =
{
	[1] = { X = 379.327, Y = 380.892 }, 
	[2] = { X = 344.702, Y = 369.888 },   
 	[3] = { X = 231.55, Y = 339.543 }, 
  	[4] = { X = 244.46, Y = 274.077 }, 
  	[5] = { X = 258.68, Y = 211.665 }, 
  	[6] = { X = 410.146, Y = 145.737 }, 
  	[7] = { X = 423.201, Y = 132.455 }, 
  	[8] = { X = 432.52, Y = 120.552 }, 
  	[9] = { X = 491.15, Y = 299.187}, 
  	[10] = { X = 481.923, Y = 283.389 },
  	[11] = { X = 369.35, Y = 282.715}, 
  	[12] = { X = 407.125, Y = 392.707 }, 
  	[13] = { X = 441.951, Y = 459.945},
  	[14] = { X = 449.334, Y = 501.292 },
  	[15] = { X = 335.426, Y = 581.877 },
  	[16] = { X = 397.003, Y = 623.478 },  
  	[17] = { X = 388.341, Y = 605.493 }, 
  	[18] = { X = 490.081, Y = 616.714 }, 
  	[19] = { X = 508.513, Y = 458.149 },
  	[20] = { X = 518.033, Y = 407.301 },
  	[21] = { X = 542.689, Y = 340.455 }, 
  	[22] = { X = 524.45, Y = 340.867 },   
 	[23] = { X = 542.652, Y = 312.716 }, 
  	[24] = { X = 597.125, Y = 328.144 }, 
  	[25] = { X = 596.309, Y = 355.654 }, 
  	[26] = { X = 584.993, Y = 369.045 }, 
 	[27] = { X = 574.053, Y = 392.269 }, 
  	[28] = { X = 538.448, Y = 407.994 }, 
  	[29] = { X = 587.424, Y = 311.826 }, 
  	[30] = { X = 445.773, Y = 245.596 },
  	[31] = { X = 413.499, Y = 274.138 }, 
  	[32] = { X = 430.07, Y = 155.031 }, 
  	[33] = { X = 373.574, Y = 149.76 },
  	[34] = { X = 348.973, Y = 163.195 },
  	[35] = { X = 286.717, Y = 190.251 },
  	[36] = { X = 295.794, Y = 296.153 },  
  	[37] = { X = 339.944, Y = 272.559 }, 
  	[38] = { X = 353.8, Y = 297.231 }, 
  	[39] = { X = 365.295, Y = 331.726 },
  	[40] = { X = 331.439, Y = 425.361 },
  	[41] = { X = 323.344, Y = 448.597 }, 
  	[42] = { X = 328.342, Y = 465.187 },   
  	[43] = { X = 339.658, Y = 474.61 }, 
  	[44] = { X = 387.791, Y = 463.73 }, 
  	[45] = { X = 235.888, Y = 525.965 }, 
  	[46] = { X = 189.237, Y = 416.829 }, 
  	[47] = { X = 151.706, Y = 367.975 }, 
  	[48] = { X = 193.742, Y = 361.686 }, 
  	[49] = { X = 207.076, Y = 316.138}, 
  	[50] = { X = 243.067, Y = 312.24},
  	[51] = { X = 347.238, Y = 332.012 }, 
  	[52] = { X = 460.275, Y = 278.272 }, 
  	[53] = { X = 522.331, Y = 365.727 },
  	[54] = { X = 333.239, Y = 372.245 },
  	[55] = { X = 249.056, Y = 429.56 },
  	[56] = { X = 229.312, Y = 486.006 },  
  	[57] = { X = 251.276, Y = 502.48 }, 
  	[58] = { X = 176.664, Y = 504.414 }, 
  	[59] = { X = 233.689, Y = 404.935 },
  	[60] = { X = 462.253, Y = 555.702 },
  	[61] = { X = 167.239, Y = 212.609}, 
	[62] = { X = 159.174, Y = 190.698},   
 	[63] = { X = 191.004, Y = 168.082}, 
  	[64] = { X = 192.238, Y = 129.376}, 
  	[65] = { X = 100.996, Y = 223.338}, 
  	[66] = { X = 139.868, Y = 270.447}, 
  	[67] = { X = 223.947, Y = 269.552}, 
  	[68] = { X = 201.918, Y = 314.809}, 
  	[69] = { X = 190.235, Y = 354.976}, 
  	[70] = { X = 231.793, Y = 336.59},
  	[71] = { X = 274.074, Y = 390.19}, 
	[72] = { X = 346.529, Y = 544.744},   
 	[73] = { X = 382.274, Y = 511.629}, 
  	[74] = { X = 208.671, Y = 227.914}, 
  	[75] = { X = 223.561, Y = 148.816}, 
  	[76] = { X = 285.507, Y = 190.502}, 
  	[77] = { X = 340.097, Y = 142.504}, 
  	[78] = { X = 110.497, Y = 182.16}, 
  	[79] = { X = 161.418, Y = 156.218}, 
  	[80] = { X = 144.635, Y = 178.898},
}


-- für jeden punkt eigenen state erzeugen
for i = 0, 9 do
	
	
	-- die statenamen durchnummerieren
	local sState, sNextState
	sState = "GotoPos" .. i
	if i == 9 then
		sNextState = "GotoPos0"
	else
		sNextState = "GotoPos" .. (i+1)
	end

	State
	{	
		StateName = sState,
		
		
		OnIdleGoHomeFake
		{
			X = (gtAllPoints[gtPersonalCounter[i+1]].X),
			Y = (gtAllPoints[gtPersonalCounter[i+1]].Y),
			Range = 8,
			UpdateInterval = (gtPersonalCounter[i+1] + gtPersonalCounter[10] + individualsumme)*2,
			Conditions = 
			{
			},
			Actions = 
			{
			},
			HomeActions = 
			{
				EntityFlagSetTrue{Name = "ef_PointArrived"},
			},
			OneTimeHomeActions = 
			{
			},
		},
		
		OnEvent
		{
			Conditions = 
			{
				EntityFlagIsTrue{Name = "ef_PointArrived"},
			},
			Actions = 
			{
				EntityFlagSetFalse{Name = "ef_PointArrived"},
			},
			GotoState = sNextState,
		},
	
		
		OnEvent
		{
			Conditions =
			{
				TimeIsNotBetween{StartHour = 6, EndHour = 20},
			},
			Actions =
			{
			},
			GotoState = "Night"
		},

		
		OnOneTimeEvent
		{
			Conditions =
			{
				AvatarHasItemMisc{Player = "pl_Human", ItemId = 129, Amount = 1},
				-- wenn Spieler Taschendiebstahlklaue hat
				AvatarHasNotItemMisc	{Player = "pl_Human", ItemId = 130, Amount = 5},
				-- solange der Spieler noch keine 5 Geldbeutel hat
				FigureIsInEntityRange{Tag = "default", TargetTag = "pl_HumanAvatar", Range = 3 },
				MapTimerIsElapsed{Name = "mt_PauseBetweenPickpocketing", Seconds = 10},
				EntityFlagIsFalse{Name = "ef_PickpocketSmallDone"},
			},
			Actions =
			{
				AvatarItemMiscGive	{Player = "pl_Human", ItemId = MyPocket, Amount = 1 },
				FigureOutcry{TextTag = "Pickpocketing01", Tag = "pl_HumanAvatar"},
				MapTimerStart{Name = "mt_PauseBetweenPickpocketing"},
				EntityFlagSetTrue{Name = "ef_PickpocketSmallDone"},
			},
		},
		
		OnOneTimeEvent
		{
			Conditions =
			{
				AvatarHasItemMisc{Player = "pl_Human", ItemId = 137, Amount = 1},
				-- wenn Spieler Große Taschendiebstahlklaue hat
				FigureIsInEntityRange{Tag = "default", TargetTag = "pl_HumanAvatar", Range = 3 },
				MapTimerIsElapsed{Name = "mt_PauseBetweenPickpocketing", Seconds = 10},
				EntityFlagIsFalse{Name = "ef_PickpocketLargeDone"},
			},
			Actions =
			{
				AvatarItemMiscGive	{Player = "pl_Human", ItemId = MyGreatPocket, Amount = 1 },
				FigureOutcry{TextTag = "Pickpocketing01", Tag = "pl_HumanAvatar"},
				MapTimerStart{Name = "mt_PauseBetweenPickpocketing"},
				EntityFlagSetTrue{Name = "ef_PickpocketLargeDone"},
			},
		},
		
	}
end



State
{	
		StateName = "Night",

		OnIdleGoHomeFake
		{
			X = (gtMyBed[individualsumme].X),
			Y = (gtMyBed[individualsumme].Y),
			Range = 15,
			UpdateInterval = 20 + individualsumme,
			Conditions = 
			{
			},
			Actions = 
			{
			},
			HomeActions = 
			{
				FigureVanish{Tag = "default"},
			},
		};
		
		
		OnOneTimeEvent
		{
			Conditions =
			{
				AvatarHasItemMisc{Player = "pl_Human", ItemId = 129, Amount = 1},
				-- wenn Spieler Taschendiebstahlklaue hat
				AvatarHasNotItemMisc	{Player = "pl_Human", ItemId = 130, Amount = 5},
				-- solange der Spieler noch keine 5 Geldbeutel hat
				FigureIsInEntityRange{Tag = "default", TargetTag = "pl_HumanAvatar", Range = 3 },
				MapTimerIsElapsed{Name = "mt_PauseBetweenPickpocketing", Seconds = 10},
				EntityFlagIsFalse{Name = "ef_PickpocketSmallDone"},
			},
			Actions =
			{
				AvatarItemMiscGive	{Player = "pl_Human", ItemId = MyPocket, Amount = 1 },
				FigureOutcry{TextTag = "Pickpocketing01", Tag = "pl_HumanAvatar"},
				MapTimerStart{Name = "mt_PauseBetweenPickpocketing"},
				EntityFlagSetTrue{Name = "ef_PickpocketSmallDone"},
			},
		},
		
		OnOneTimeEvent
		{
			Conditions =
			{
				AvatarHasItemMisc{Player = "pl_Human", ItemId = 137, Amount = 1},
				-- wenn Spieler Große Taschendiebstahlklaue hat
				FigureIsInEntityRange{Tag = "default", TargetTag = "pl_HumanAvatar", Range = 3 },
				MapTimerIsElapsed{Name = "mt_PauseBetweenPickpocketing", Seconds = 10},
				EntityFlagIsFalse{Name = "ef_PickpocketLargeDone"},
			},
			Actions =
			{
				AvatarItemMiscGive	{Player = "pl_Human", ItemId = MyGreatPocket, Amount = 1 },
				FigureOutcry{TextTag = "Pickpocketing01", Tag = "pl_HumanAvatar"},
				MapTimerStart{Name = "mt_PauseBetweenPickpocketing"},
				EntityFlagSetTrue{Name = "ef_PickpocketLargeDone"},
			},
		},
		
		OnFigureRespawnEvent
		{

			WaitTime = (gtPersonalCounter[1])*2,
			X = (gtMyBed[individualsumme].X),
			Y = (gtMyBed[individualsumme].Y),
			Conditions = 
			{
				TimeIsBetween{StartHour = 6, EndHour = 20},
			},
			Actions =
			{
				EntityFlagSetTrue{Name = "ef_Respawned"},
			},
		},
		
		OnEvent
		{
			Conditions = 
			{
				EntityFlagIsTrue{Name = "ef_Respawned"},
			},
			Actions =
			{
				EntityFlagSetFalse{Name = "ef_Respawned"},
			},
			GotoState = "GotoPos0",
		},

}